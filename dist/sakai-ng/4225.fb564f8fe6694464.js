"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[4225],{4225:(Y,m,o)=>{o.r(m),o.d(m,{LandingModule:()=>F});var g=o(6895),l=o(6770),n=o(1571),u=o(8368),f=o(3897),p=o(8568),d=o(433);function v(e,i){1&e&&(n.TgZ(0,"div",24),n._uU(1," Username is required! "),n.qZA())}function h(e,i){1&e&&(n.TgZ(0,"div"),n._uU(1," Password is required "),n.qZA())}function x(e,i){1&e&&(n.TgZ(0,"div"),n._uU(1," Password must be at least 6 characters "),n.qZA())}function L(e,i){if(1&e&&(n.TgZ(0,"div",24),n.YNc(1,h,2,0,"div",25),n.YNc(2,x,2,0,"div",25),n.qZA()),2&e){n.oxw();const t=n.MAs(14);n.xp6(1),n.Q6J("ngIf",t.errors.required),n.xp6(1),n.Q6J("ngIf",t.errors.minlength)}}function Z(e,i){if(1&e&&(n.TgZ(0,"div",26),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.hij(" Login failed: ",t.errorMessage," ")}}const c=function(e){return{"is-invalid":e}};function b(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"form",12,13),n.NdJ("ngSubmit",function(){n.CHM(t);const r=n.MAs(1),a=n.oxw();return n.KtG(r.form.valid&&a.onSubmit())}),n.TgZ(2,"div"),n.YNc(3,v,2,0,"div",14),n.YNc(4,L,3,2,"div",14),n.qZA(),n.TgZ(5,"div",15)(6,"label",16),n._uU(7,"Username"),n.qZA(),n.TgZ(8,"input",17,18),n.NdJ("ngModelChange",function(r){n.CHM(t);const a=n.oxw();return n.KtG(a.form.username=r)}),n.qZA()(),n.TgZ(10,"div",15)(11,"label",19),n._uU(12,"Password"),n.qZA(),n.TgZ(13,"input",20,21),n.NdJ("ngModelChange",function(r){n.CHM(t);const a=n.oxw();return n.KtG(a.form.password=r)}),n.qZA()(),n.TgZ(15,"div",15)(16,"button",22),n._uU(17," Login "),n.qZA()(),n.TgZ(18,"div",15),n.YNc(19,Z,2,1,"div",23),n.qZA()()}if(2&e){const t=n.MAs(1),s=n.MAs(9),r=n.MAs(14),a=n.oxw();n.xp6(3),n.Q6J("ngIf",s.errors&&t.submitted),n.xp6(1),n.Q6J("ngIf",r.errors&&t.submitted),n.xp6(4),n.Q6J("ngModel",a.form.username)("ngClass",n.VKq(7,c,t.submitted&&s.errors)),n.xp6(5),n.Q6J("ngModel",a.form.password)("ngClass",n.VKq(9,c,t.submitted&&r.errors)),n.xp6(6),n.Q6J("ngIf",t.submitted&&a.isLoginFailed)}}function C(e,i){if(1&e&&(n.TgZ(0,"div",27),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.hij(" Logged in as ",t.roles,". ")}}let M=(()=>{class e{constructor(t,s,r,a){this.authService=t,this.storageService=s,this.layoutService=r,this.router=a,this.form={username:null,password:null},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){this.storageService.isLoggedIn()&&(this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles)}onSubmit(){const{username:t,password:s}=this.form;this.authService.login(t,s).subscribe({next:r=>{this.storageService.saveUser(r),this.isLoginFailed=!1,this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles,this.reloadPage()},error:r=>{this.errorMessage=r.error.message,this.isLoginFailed=!0}})}reloadPage(){this.router.navigate(["/dashboard"])}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u.e),n.Y36(f.V),n.Y36(p.P),n.Y36(l.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-landing"]],decls:14,vars:2,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(214, 50, 50, 0) 30%)"],[1,"w-full","surface-card","py-8","px-5","sm:px-8",2,"border-radius","53px"],[1,"text-center","mb-5"],["src","../../../../assets/layout/images/logo.png","alt","Image","height","100",1,"mb-3"],[1,"text-900","text-3xl","font-medium","mb-3"],[1,"text-600","font-medium"],[1,"col-md-12"],[1,"card","card-container"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","invalid-feedback",4,"ngIf"],[1,"form-group"],["for","email",1,"block","text-900","text-xl","font-medium","mb-2"],["type","text","name","username","required","","placeholder","Username","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModel","ngClass","ngModelChange"],["username","ngModel"],["for","password",1,"block","text-900","text-xl","font-medium","mb-2"],["type","password","name","Password","required","","minlength","6","placeholder","Password","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModel","ngClass","ngModelChange"],["password","ngModel"],[1,"btn","btn-primary","bb-btn"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(t,s){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n._UZ(5,"img",5),n.TgZ(6,"div",6),n._uU(7,"bloodSakha"),n.qZA(),n.TgZ(8,"span",7),n._uU(9,"WELCOME"),n.qZA()(),n.TgZ(10,"div",8)(11,"div",9),n.YNc(12,b,20,11,"form",10),n.YNc(13,C,2,1,"div",11),n.qZA()()()()()()),2&t&&(n.xp6(12),n.Q6J("ngIf",!s.isLoggedIn),n.xp6(1),n.Q6J("ngIf",s.isLoggedIn))},dependencies:[g.mk,g.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,d.On,d.F],styles:[".bb-btn[_ngcontent-%COMP%]{padding:10px 25px;font-weight:700;background:#8A1D1F;color:#fff}.invalid-feedback[_ngcontent-%COMP%]{color:red;margin:0;padding:0}"]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[l.Bz.forChild([{path:"",component:M}]),l.Bz]}),e})();var A=o(5132),I=o(5108),_=o(9364),y=o(9764),J=o(5593),S=o(1795),w=o(7463),U=o(1167);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.ez,T,I.x,A.l,_.S,y.Q,J.hJ,S.T,w.l,U.KZ,d.u5]}),e})()}}]);