"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[1905],{1905:(j,u,r)=>{r.r(u),r.d(u,{DashboardModule:()=>M});var l=r(6895),g=r(433),p=r(9364),m=r(1327),a=r(99),h=r(5593),v=r(5132),Z=r(7919),c=r(6770),e=r(1571),b=r(8568),f=r(1527),y=r(9792),U=r(6675),A=r(3897),x=r(805);function T(o,n){1&o&&(e.TgZ(0,"tr")(1,"th",25),e._uU(2,"Blood Bank "),e._UZ(3,"p-sortIcon",26),e.qZA(),e.TgZ(4,"th",27),e._uU(5,"Donar Name "),e._UZ(6,"p-sortIcon",28),e.qZA(),e.TgZ(7,"th",27),e._uU(8,"Blood Group"),e._UZ(9,"p-sortIcon",28),e.qZA(),e.TgZ(10,"th",29),e._uU(11,"Mobile"),e._UZ(12,"p-sortIcon",30),e.qZA(),e.TgZ(13,"th",31),e._uU(14,"date "),e._UZ(15,"p-columnFilter",32),e.qZA()())}function C(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.directories.name),e.xp6(2),e.Oqu(t.donars.name),e.xp6(2),e.Oqu(t.donars.group),e.xp6(2),e.Oqu(t.donars.mobile),e.xp6(2),e.Oqu(e.xi3(11,5,t.createdAt,"dd/MM/yyyy"))}}const D=function(){return["name","bloodbank","group","date"]},q=function(){return[10,20,30]};function S(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",18)(2,"div",19)(3,"h5"),e._uU(4,"Recent Donations"),e.qZA(),e.TgZ(5,"p-table",20,21),e.YNc(7,T,16,0,"ng-template",22),e.YNc(8,C,12,8,"ng-template",23),e.qZA()()(),e.TgZ(9,"div",18)(10,"div",19)(11,"h5"),e._uU(12,"Stock of Blood Groups"),e.qZA(),e._UZ(13,"p-chart",24),e.qZA()()()),2&o){const t=e.oxw();e.xp6(5),e.Q6J("value",t.donationreports)("globalFilterFields",e.DdM(9,D))("rows",10)("paginator",!0)("rowsPerPageOptions",e.DdM(10,q))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(8),e.Q6J("data",t.chartData)("options",t.chartOptions)}}let O=(()=>{class o{constructor(t,i,s,d,P,R){this.layoutService=t,this.directoryService=i,this.donarService=s,this.donationService=d,this.storageService=P,this.router=R,this.donationreports=[],this.donationreport={},this.donar="ROLE_USER",this.bloodbank="ROLE_MODERATOR",this.admin="ROLE_ADMIN"}ngOnInit(){this.retrieveDonationreports(),this.initChart(),this.retrieveDonarsCount(),this.retrieveDirectorysCount(),this.currentUser=this.storageService.getUser(),0===Object.keys(this.currentUser).length&&this.router.navigate(["/landing"])}initChart(){const t=getComputedStyle(document.documentElement),i=t.getPropertyValue("--text-color"),s=t.getPropertyValue("--text-color-secondary"),d=t.getPropertyValue("--surface-border");this.chartData={labels:["AB","A","B","O"],datasets:[{label:"+",data:[65,59,80,81,56,55,40,30],fill:!1,backgroundColor:t.getPropertyValue("--green-300"),borderColor:t.getPropertyValue("--green-500"),borderWidth:1},{label:"-",data:[65,59,80,81,56,55,40,30],fill:!1,backgroundColor:t.getPropertyValue("--red-300"),borderColor:t.getPropertyValue("--red-500"),borderWidth:1}]},this.chartOptions={plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:s},grid:{color:d,drawBorder:!1}},y:{ticks:{color:s},grid:{color:d,drawBorder:!1}}}}}retrieveDonarsCount(){this.donarService.count().subscribe(t=>{this.countdonars=t.no,console.log(t)},t=>{console.log(t)})}retrieveDirectorysCount(){this.directoryService.count().subscribe(t=>{this.countdirectorys=t.no,console.log(t)},t=>{console.log(t)})}retrieveDonationreports(){this.donationService.getAllDonation().subscribe(t=>{this.donationreports=t,console.log(t)},t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.P),e.Y36(f.Q),e.Y36(y.u),e.Y36(U.l),e.Y36(A.V),e.Y36(c.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],decls:62,vars:5,consts:[[1,"grid"],[1,"col-12","md:col-12","lg:col-12"],[1,"col-12","md:col-6","lg:col-3"],[1,"surface-card","shadow-2","p-3","border-round"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-shopping-cart","text-blue-500","text-xl"],[1,"text-green-500","font-medium"],[1,"text-500"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-map-marker","text-orange-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-inbox","text-cyan-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-purple-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-comment","text-purple-500","text-xl"],["class","grid",4,"ngIf"],[1,"col-12","xl:col-6"],[1,"card"],["id","my-table","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","dataKey","id",3,"value","globalFilterFields","rows","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt",""],["pTemplate","header"],["pTemplate","body"],["type","bar",3,"data","options"],["pSortableColumn","name"],["field","name"],["pSortableColumn","bloodbank"],["field","bloodbank"],["pSortableColumn","mobile"],["field","mobile"],["pSortableColumn","date"],["type","date","field","date","display","menu","placeholder","mm/dd/yyyy"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3")(3,"strong"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"div")(9,"span",5),e._uU(10,"Donars"),e.qZA(),e.TgZ(11,"div",6),e._uU(12),e.qZA()(),e.TgZ(13,"div",7),e._UZ(14,"i",8),e.qZA()(),e.TgZ(15,"span",9),e._uU(16,"24 new "),e.qZA(),e.TgZ(17,"span",10),e._uU(18,"since last visit"),e.qZA()()(),e.TgZ(19,"div",2)(20,"div",3)(21,"div",4)(22,"div")(23,"span",5),e._uU(24,"Blood Bank's"),e.qZA(),e.TgZ(25,"div",6),e._uU(26),e.qZA()(),e.TgZ(27,"div",11),e._UZ(28,"i",12),e.qZA()(),e.TgZ(29,"span",9),e._uU(30,"%52+ "),e.qZA(),e.TgZ(31,"span",10),e._uU(32,"since last week"),e.qZA()()(),e.TgZ(33,"div",2)(34,"div",3)(35,"div",4)(36,"div")(37,"span",5),e._uU(38,"Monthly Sales"),e.qZA(),e.TgZ(39,"div",6),e._uU(40,"28441"),e.qZA()(),e.TgZ(41,"div",13),e._UZ(42,"i",14),e.qZA()(),e.TgZ(43,"span",9),e._uU(44,"520 "),e.qZA(),e.TgZ(45,"span",10),e._uU(46,"newly registered"),e.qZA()()(),e.TgZ(47,"div",2)(48,"div",3)(49,"div",4)(50,"div")(51,"span",5),e._uU(52,"Weekely Sales"),e.qZA(),e.TgZ(53,"div",6),e._uU(54,"152 Unread"),e.qZA()(),e.TgZ(55,"div",15),e._UZ(56,"i",16),e.qZA()(),e.TgZ(57,"span",9),e._uU(58,"85 "),e.qZA(),e.TgZ(59,"span",10),e._uU(60,"responded"),e.qZA()()()(),e.YNc(61,S,14,11,"div",17)),2&t&&(e.xp6(4),e.AsE("Welcome ",i.currentUser.username," ",i.currentUser.roles,""),e.xp6(8),e.Oqu(i.countdonars),e.xp6(14),e.Oqu(i.countdirectorys),e.xp6(35),e.Q6J("ngIf",i.currentUser.roles[0]===i.admin))},dependencies:[l.O5,p.C,a.iA,x.jx,a.lQ,a.fz,a.xl,l.uU],encapsulation:2}),o})(),B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild([{path:"",component:O}]),c.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,g.u5,p.S,m.$9,a.U$,v.l,Z.ml,h.hJ,B]}),o})()}}]);