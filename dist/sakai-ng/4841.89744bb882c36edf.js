"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[4841],{4841:(A,v,s)=>{s.r(v),s.d(v,{SubscriptionModule:()=>V});var a=s(6895),g=s(433),d=s(99),T=s(3388),S=s(5593),r=s(1795),b=s(2453),l=s(1383),c=s(6408),h=s(1740),m=s(3054),Z=s(2210),_=s(613),D=s(5047),M=s(1493),y=s(3608),x=s(6770),C=s(805),E=s(4327),I=s(6166),B=s(2983),O=s.n(B),t=s(1571),F=s(9063),R=s(6341);function U(i,u){1&i&&(t.TgZ(0,"div",13)(1,"span",14)(2,"a",15),t._uU(3," \xa0Reports"),t.qZA()()())}function z(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"h5",17),t._uU(2,"Subscriptions Details"),t.qZA(),t.TgZ(3,"span",18),t._UZ(4,"i",19),t.TgZ(5,"input",20),t.NdJ("input",function(o){t.CHM(e);const p=t.oxw(),f=t.MAs(7);return t.KtG(p.onGlobalFilter(f,o))}),t.qZA()()()}}function N(i,u){1&i&&(t.TgZ(0,"tr")(1,"th",21),t._uU(2,"Name "),t._UZ(3,"p-sortIcon",22),t.qZA(),t.TgZ(4,"th",23),t._uU(5,"Mobile"),t._UZ(6,"p-sortIcon",24),t.qZA(),t.TgZ(7,"th",25),t._uU(8,"DOB"),t._UZ(9,"p-sortIcon",26),t.qZA(),t.TgZ(10,"th",27),t._uU(11,"Plan"),t._UZ(12,"p-sortIcon",28),t.qZA(),t.TgZ(13,"th",29),t._uU(14,"E-Mail"),t._UZ(15,"p-sortIcon",30),t.qZA(),t._UZ(16,"th"),t.qZA())}function H(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"div",31)(13,"button",32),t.NdJ("click",function(){const p=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.subscribeMember(p))}),t.qZA()()()()}if(2&i){const e=u.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.mobile),t.xp6(2),t.Oqu(e.dob),t.xp6(2),t.Oqu(e.subscription),t.xp6(2),t.Oqu(e.email)}}function P(i,u){if(1&i&&t._uU(0),2&i){const e=t.oxw(2);t.hij(" ",e.subscription.plan," ")}}function Y(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"label",34),t._uU(2,"Plan Type"),t.qZA(),t.TgZ(3,"p-dropdown",35),t.NdJ("ngModelChange",function(o){t.CHM(e);const p=t.oxw();return t.KtG(p.subscription.plan=o)}),t.YNc(4,P,1,1,"ng-template",36),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.subscription.plan)("options",e.plans)}}function w(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideDialog())}),t.qZA(),t.TgZ(1,"button",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.subscribeMembership())}),t.qZA()}}const J=function(){return["name","mobile","email"]},j=function(){return[10,20,30]},L=function(){return{width:"450px",height:"400px"}};let G=(()=>{class i{constructor(e,n,o){this.messageService=e,this.subscriptionService=n,this.memberService=o,this.subscriptions=[],this.subscription={},this.members=[],this.member={},this.selectedSubscriptions=[],this.subscriptionDialog=!1,this.deleteSubscriptionDialog=!1,this.deleteSubscriptionsDialog=!1,this.deleteProductsDialog=!1,this.submitted=!1,this.plans=[],this.prices=[],this.rowsPerPageOptions=[5,10,20],this.subscribeDialogBox=!1}ngOnInit(){this.retrieveSubscriptions(),this.retrieveMembers(),this.plans=[{label:"1 Month",value:"1"},{label:"3 Months",value:"3"},{label:"6 Months",value:"6"},{label:"12 Months",value:"12"}],this.prices=[{label:"ABC",value:"A"},{label:"MNO",value:"B"},{label:"XYZ",value:"C"}]}retrieveMembers(){this.memberService.getAll().subscribe(e=>{this.members=e,console.log(e)},e=>{console.log(e)})}exportExcel(){s.e(574).then(s.bind(s,574)).then(e=>{const o={Sheets:{data:e.utils.json_to_sheet(this.subscriptions)},SheetNames:["data"]},p=e.write(o,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(p,"trainers")})}saveAsExcelFile(e,n){const f=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});E.saveAs(f,n+"_export_"+(new Date).getTime()+".xlsx")}exportPdf(){const e=new I.default("l","mm","a4");O()(e,{html:"#pr_id_2-table"}),e.save("trainers.pdf")}retrieveSubscriptions(){this.subscriptionService.getAll().subscribe(e=>{this.subscriptions=e},e=>{console.log(e)})}saveSubscription(){var e,n;this.submitted=!0,!(null===(e=this.subscription.plan)||void 0===e)&&e.trim()&&!(null===(n=this.subscription.mid)||void 0===n)&&n.trim()&&(console.log(this.subscription.mid),this.subscriptionService.create(this.subscription).subscribe(o=>{console.log(o),this.submitted=!0,this.ngOnInit()},o=>{console.log(o)}),this.submitted=!0,this.messageService.add({severity:"success",summary:"Successful",detail:"Subscription Successfully Registered",life:3e3})),this.subscriptionDialog=!1,this.subscription={}}openNew(){this.subscription={},this.submitted=!1,this.subscriptionDialog=!0}deleteSelectedSubscriptions(){this.deleteSubscriptionsDialog=!0}editSubscription(e){this.subscription=Object.assign({},e),this.subscriptionDialog=!0}deleteSubscription(e){this.deleteSubscriptionDialog=!0,this.subscription=Object.assign({},e)}confirmDeleteSelected(){this.deleteSubscriptionsDialog=!1,this.subscriptions=this.subscriptions.filter(e=>!this.selectedSubscriptions.includes(e)),this.selectedSubscriptions.map(e=>{this.subscriptionService.delete(e.id).subscribe(n=>{console.log(n),this.ngOnInit()},n=>{console.log(n)})}),this.messageService.add({severity:"success",summary:"Successful",detail:this.selectedSubscriptions.length+" Subscriptions(s) Deleted",life:3e3}),this.selectedSubscriptions=[]}subscribeMember(e){this.subscribeDialogBox=!0,this.member=Object.assign({},e)}subscribeMembership(){this.subscribeDialogBox=!1,this.subscription.memberId=this.member.id,console.log(this.member.id),console.log(this.subscription),this.subscriptionService.create(this.subscription).subscribe(e=>{console.log(e),this.submitted=!0,this.ngOnInit()},e=>{console.log(e)}),this.messageService.add({severity:"success",summary:"Successful",detail:"Subscription Issued",life:3e3})}hideDialog(){this.subscribeDialogBox=!1,this.submitted=!1}findIndexById(e){let n=-1;for(let o=0;o<this.subscriptions.length;o++)if(this.subscriptions[o].id===e){n=o;break}return n}onGlobalFilter(e,n){e.filterGlobal(n.target.value,"contains")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.ez),t.Y36(F.F),t.Y36(R.n))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t._Bn([C.ez])],decls:14,vars:15,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["id","my-table","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","dataKey","id",3,"value","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Subscription Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"my-2"],[1,"p-buttonset"],["routerLink","/subreports","pButton","","pRipple","","icon","pi pi-file-edit","routerLinkActive","members"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","name"],["field","name"],["pSortableColumn","mobile"],["field","mobile"],["pSortableColumn","dob"],["field","dob"],["pSortableColumn","subscription"],["field","subscription"],["pSortableColumn","email"],["field","email"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-bell","pTooltip","Enter your username",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","subscription"],["inputId","plan","optionValue","value","placeholder","Choose Subscription",3,"ngModel","options","ngModelChange"],["pTemplate","selectedItem"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Subscribe","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,U,4,0,"ng-template",4),t.qZA(),t.TgZ(6,"p-table",5,6),t.YNc(8,z,6,0,"ng-template",7),t.YNc(9,N,17,0,"ng-template",8),t.YNc(10,H,14,5,"ng-template",9),t.qZA()(),t.TgZ(11,"p-dialog",10),t.NdJ("visibleChange",function(p){return n.subscribeDialogBox=p}),t.YNc(12,Y,5,2,"ng-template",11),t.YNc(13,w,2,0,"ng-template",12),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("value",n.members)("rows",10)("globalFilterFields",t.DdM(12,J))("rows",10)("paginator",!0)("rowsPerPageOptions",t.DdM(13,j))("showCurrentPageReport",!0)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(14,L)),t.Q6J("visible",n.subscribeDialogBox)("modal",!0))},dependencies:[x.rH,x.Od,d.iA,C.jx,d.lQ,d.fz,S.Hq,g.JJ,g.On,y.u,r.H,b.FN,l.o,h.o,Z.Lt,M.V],encapsulation:2}),i})(),K=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.Bz.forChild([{path:"",component:G}]),x.Bz]}),i})(),V=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.ez,K,d.U$,T.O,g.u5,S.hJ,y.z,r.T,b.EV,l.V,c.Xt,h.j,m.A,Z.kW,_.cc,D.L$,M.S]}),i})()},3054:(A,v,s)=>{s.d(v,{A:()=>S,g:()=>T});var a=s(1571),g=s(6895),d=s(433);let T=(()=>{class r{constructor(l,c,h,m){this.el=l,this.ngModel=c,this.control=h,this.cd=m,this.onResize=new a.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(l){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(l){this.autoResize&&this.resize(l)}onBlur(l){this.autoResize&&this.resize(l)}resize(l){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(l||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return r.\u0275fac=function(l){return new(l||r)(a.Y36(a.SBq),a.Y36(d.On,8),a.Y36(d.a5,8),a.Y36(a.sBO))},r.\u0275dir=a.lG2({type:r,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(l,c){1&l&&a.NdJ("input",function(m){return c.onInput(m)})("focus",function(m){return c.onFocus(m)})("blur",function(m){return c.onBlur(m)}),2&l&&a.ekj("p-filled",c.filled)("p-inputtextarea-resizable",c.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),r})(),S=(()=>{class r{}return r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[g.ez]}),r})()}}]);